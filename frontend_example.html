<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Switcher - Frontend Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        .company-selector {
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            background-color: white;
        }

        select:focus {
            border-color: #007bff;
            outline: none;
        }

        .btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .company-info {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            border-left: 4px solid #007bff;
        }

        .company-info h3 {
            margin-top: 0;
            color: #007bff;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .info-item {
            background: white;
            padding: 10px;
            border-radius: 3px;
        }

        .info-label {
            font-weight: bold;
            color: #666;
            font-size: 12px;
            text-transform: uppercase;
        }

        .info-value {
            color: #333;
            margin-top: 5px;
        }

        .questions-section {
            margin-top: 20px;
        }

        .question-category {
            margin-bottom: 20px;
        }

        .category-title {
            background-color: #e9ecef;
            padding: 10px;
            font-weight: bold;
            border-radius: 3px;
            margin-bottom: 10px;
        }

        .question-item {
            background: white;
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 3px;
            border-left: 3px solid #007bff;
        }

        .question-key {
            font-weight: bold;
            color: #007bff;
            font-size: 12px;
        }

        .question-text {
            margin-top: 5px;
            color: #333;
        }

        .status {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .loading {
            text-align: center;
            color: #666;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üè¢ Company Configuration Manager</h1>
            <p>Switch between different company configurations for transcript analysis</p>
        </div>

        <div class="company-selector">
            <div class="form-group">
                <label for="companySelect">Select Company:</label>
                <select id="companySelect">
                    <option value="">Loading companies...</option>
                </select>
            </div>
            <button class="btn" id="switchBtn" onclick="switchCompany()" disabled>Switch Company</button>
            <button class="btn" onclick="refreshCompanies()">Refresh List</button>
        </div>

        <div id="status"></div>
        <div id="companyInfo" class="company-info" style="display: none;">
            <h3 id="companyName">Company Information</h3>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">Company ID</div>
                    <div class="info-value" id="companyId">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Display Name</div>
                    <div class="info-value" id="displayName">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Transcript Directory</div>
                    <div class="info-value" id="transcriptDir">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Output Prefix</div>
                    <div class="info-value" id="outputPrefix">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Question Count</div>
                    <div class="info-value" id="questionCount">-</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Category Count</div>
                    <div class="info-value" id="categoryCount">-</div>
                </div>
            </div>

            <div class="questions-section">
                <h4>Analysis Questions</h4>
                <div id="questionsList"></div>
            </div>
        </div>
    </div>

    <script>
        // Mock API responses (in real implementation, these would be actual API calls)
        const mockCompanies = {
            "success": true,
            "companies": [
                {
                    "id": "flexxray",
                    "name": "FlexXray",
                    "is_current": true,
                    "transcript_directory": "FlexXray Transcripts",
                    "output_prefix": "FlexXray",
                    "question_count": 7
                },
                {
                    "id": "techpro",
                    "name": "TechPro",
                    "is_current": false,
                    "transcript_directory": "TechPro Transcripts",
                    "output_prefix": "TechPro",
                    "question_count": 6
                }
            ],
            "current_company": "flexxray",
            "total_count": 2
        };

        const mockCompanyInfo = {
            "success": true,
            "company": {
                "id": "flexxray",
                "display_name": "FlexXray",
                "transcript_directory": "FlexXray Transcripts",
                "output_prefix": "FlexXray",
                "key_questions": {
                    "market_leadership": "What evidence shows FlexXray's market leadership and competitive advantage?",
                    "value_proposition": "How does FlexXray's value proposition address the risk of insourcing?",
                    "local_presence": "How does FlexXray's local presence and footprint drive customer demand?",
                    "technology_advantages": "What proprietary technology advantages does FlexXray offer?",
                    "rapid_turnaround": "How do FlexXray's rapid turnaround times benefit customers?",
                    "limited_tam": "What limits FlexXray's Total Addressable Market (TAM)?",
                    "unpredictable_timing": "How does unpredictable event timing impact FlexXray's business?"
                },
                "question_categories": {
                    "key_takeaways": ["market_leadership", "value_proposition", "local_presence"],
                    "strengths": ["technology_advantages", "rapid_turnaround"],
                    "weaknesses": ["limited_tam", "unpredictable_timing"]
                },
                "question_count": 7,
                "category_count": 3
            }
        };

        let currentCompany = "flexxray";

        // Load companies into dropdown
        function loadCompanies() {
            const select = document.getElementById('companySelect');
            select.innerHTML = '';

            if (mockCompanies.success) {
                mockCompanies.companies.forEach(company => {
                    const option = document.createElement('option');
                    option.value = company.id;
                    option.textContent = company.name;
                    if (company.is_current) {
                        option.selected = true;
                        currentCompany = company.id;
                    }
                    select.appendChild(option);
                });
                document.getElementById('switchBtn').disabled = false;
            } else {
                select.innerHTML = '<option value="">Error loading companies</option>';
            }
        }

        // Switch company
        function switchCompany() {
            const select = document.getElementById('companySelect');
            const selectedCompany = select.value;

            if (!selectedCompany) {
                showStatus('Please select a company', 'error');
                return;
            }

            if (selectedCompany === currentCompany) {
                showStatus('This company is already selected', 'error');
                return;
            }

            showStatus('Switching company...', 'loading');

            // Simulate API call
            setTimeout(() => {
                currentCompany = selectedCompany;
                showStatus(`Successfully switched to ${selectedCompany}`, 'success');
                loadCompanyInfo(selectedCompany);
            }, 1000);
        }

        // Load company information
        function loadCompanyInfo(companyId) {
            // In real implementation, this would be an API call
            const companyInfo = mockCompanyInfo;

            if (companyInfo.success) {
                const company = companyInfo.company;

                document.getElementById('companyId').textContent = company.id;
                document.getElementById('displayName').textContent = company.display_name;
                document.getElementById('transcriptDir').textContent = company.transcript_directory;
                document.getElementById('outputPrefix').textContent = company.output_prefix;
                document.getElementById('questionCount').textContent = company.question_count;
                document.getElementById('categoryCount').textContent = company.category_count;

                // Load questions
                const questionsList = document.getElementById('questionsList');
                questionsList.innerHTML = '';

                Object.entries(company.question_categories).forEach(([category, questionKeys]) => {
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'question-category';

                    const categoryTitle = document.createElement('div');
                    categoryTitle.className = 'category-title';
                    categoryTitle.textContent = category.replace('_', ' ').toUpperCase();
                    categoryDiv.appendChild(categoryTitle);

                    questionKeys.forEach(key => {
                        if (company.key_questions[key]) {
                            const questionDiv = document.createElement('div');
                            questionDiv.className = 'question-item';

                            const keyDiv = document.createElement('div');
                            keyDiv.className = 'question-key';
                            keyDiv.textContent = key.replace('_', ' ').toUpperCase();

                            const textDiv = document.createElement('div');
                            textDiv.className = 'question-text';
                            textDiv.textContent = company.key_questions[key];

                            questionDiv.appendChild(keyDiv);
                            questionDiv.appendChild(textDiv);
                            categoryDiv.appendChild(questionDiv);
                        }
                    });

                    questionsList.appendChild(categoryDiv);
                });

                document.getElementById('companyInfo').style.display = 'block';
            }
        }

        // Refresh companies list
        function refreshCompanies() {
            showStatus('Refreshing companies...', 'loading');
            setTimeout(() => {
                loadCompanies();
                showStatus('Companies refreshed', 'success');
            }, 500);
        }

        // Show status message
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.className = `status ${type}`;
            statusDiv.textContent = message;

            if (type === 'success' || type === 'error') {
                setTimeout(() => {
                    statusDiv.style.display = 'none';
                }, 3000);
            } else {
                statusDiv.style.display = 'block';
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            loadCompanies();
            loadCompanyInfo(currentCompany);
        });
    </script>
</body>

</html>